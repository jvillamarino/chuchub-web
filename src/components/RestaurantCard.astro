---
import type { Restaurant } from '../models/restaurant.interface';
import { t } from 'i18next';
import { removeWhiteSpace } from '../common/functions/strings-manipulations.functions';
import { localizePath } from 'astro-i18next';

interface Props {
    data: Restaurant;
}

const { data } = Astro.props;
---

<div class="restaurant-card">
    <img src={data.image} alt={`${data.name} Cover`} class="card__cover" />
    <div class="card-content">
        <div class="content-logo">
            <img src={data.logo} alt={`${data.name} Logo`} class="content-logo__image" />
        </div>
        <div class="content-text">
            <h1 class="content__title">{data.name}</h1>
            <h1 class="content__subtitle">{t('common.fastfood')}</h1>
            <a
                href={localizePath(`/${removeWhiteSpace(data.name)}/${data.id}`)}
                class="btn btn-circle btn-md absolute right-3 bottom-8 bg-orange-200 hover:bg-orange-400 bg-[100%] bg-[size:400%] transition hover:bg-[0]"
            >
                <svg
                    viewBox="0 0 24 24"
                    class="text-white"
                    astro-icon="ic:outline-arrow-circle-right"
                    ><path
                        fill="currentColor"
                        d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zM4 12c0-4.42 3.58-8 8-8s8 3.58 8 8-3.58 8-8 8-8-3.58-8-8zm12 0-4 4-1.41-1.41L12.17 13H8v-2h4.17l-1.59-1.59L12 8l4 4z"
                    ></path></svg
                >
            </a>
            <div class="content-descriptive">
                <div class="descriptive-rating">
                    <svg
                        viewBox="0 0 256 256"
                        class="descriptive-rating__icon"
                        astro-icon="ph:star-light"
                        ><path
                            fill="currentColor"
                            d="M187.3 230a15.2 15.2 0 0 1-7.7-2.2l-50.4-32a2.1 2.1 0 0 0-2.4 0l-46.9 29.7a15.5 15.5 0 0 1-17.8-.6 16.2 16.2 0 0 1-6.2-17.4l13.5-53.1a2.8 2.8 0 0 0-.9-2.8l-45.2-37.7A14.7 14.7 0 0 1 18.7 98a14.5 14.5 0 0 1 12.8-10l59.1-3.8a2.4 2.4 0 0 0 2-1.6l22-55.4a14.4 14.4 0 0 1 26.8 0l22 55.4a2.4 2.4 0 0 0 2 1.6l59.1 3.8a14.5 14.5 0 0 1 12.8 10 14.7 14.7 0 0 1-4.6 15.9l-45.2 37.7a2.8 2.8 0 0 0-.9 2.8l14.6 57.3a14.7 14.7 0 0 1-5.6 15.6 14.2 14.2 0 0 1-8.3 2.7zM128 183.5a13.7 13.7 0 0 1 7.6 2.2l50.5 31.9a2.1 2.1 0 0 0 2.5-.1 2.7 2.7 0 0 0 1-2.9L175 157.3a14.7 14.7 0 0 1 4.8-14.9l45.2-37.7a2.5 2.5 0 0 0 .8-2.9 2.3 2.3 0 0 0-2.1-1.8l-59-3.8a14.8 14.8 0 0 1-12.5-9.1l-22-55.5a2.3 2.3 0 0 0-4.4 0l-22 55.5a14.8 14.8 0 0 1-12.5 9.1l-59 3.8a2.3 2.3 0 0 0-2.1 1.8 2.5 2.5 0 0 0 .8 2.9l45.2 37.7a14.7 14.7 0 0 1 4.8 14.9l-13.5 53.2a4.4 4.4 0 0 0 1.6 4.7 3.9 3.9 0 0 0 4.4.2l46.9-29.7a13.7 13.7 0 0 1 7.6-2.2z"
                        ></path></svg
                    >
                    <p class="descriptive-rating__text">
                        {data.ratings.average} ({data.ratings.total})
                    </p>
                </div>
                <div class="descriptive-rating">
                    <svg
                        viewBox="0 0 28 28"
                        class="descriptive-rating__icon"
                        astro-icon="fluent:location-28-regular"
                        ><path
                            fill="currentColor"
                            d="M14 2.25A9.75 9.75 0 0 1 23.75 12c0 4.12-2.895 8.61-8.61 13.518a1.75 1.75 0 0 1-2.283-.002l-.378-.328C7.017 20.408 4.25 16.028 4.25 12A9.75 9.75 0 0 1 14 2.25zm0 1.5A8.25 8.25 0 0 0 5.75 12c0 3.502 2.548 7.537 7.714 12.057l.373.323a.25.25 0 0 0 .326 0c5.416-4.652 8.087-8.795 8.087-12.38A8.25 8.25 0 0 0 14 3.75zm0 4.5a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5z"
                        ></path></svg
                    >
                    <p class="descriptive-rating__text">16km</p>
                </div>
            </div>
        </div>
    </div>

    <style>
        .restaurant-card {
            @apply relative w-full flex flex-col bg-white rounded-2xl overflow-hidden shadow hover:shadow-lg hover:scale-[1.02] transition-all cursor-default;
        }

        .card-content {
            @apply px-4 py-2 min-h-[8ch] flex flex-row;
        }

        .card__cover {
            @apply bg-auto pointer-events-none h-48;
        }

        .content-logo {
            @apply relative h-2 w-16;
        }

        .content-logo__image {
            @apply absolute rounded-[14px] shadow-2xl w-14 -bottom-3 bg-white;
        }

        .content__title {
            @apply font-bold text-[--lastBlack] md:text-xl;
        }

        .content__subtitle {
            @apply text-[--lastGray] text-xs md:text-base;
        }

        .content-descriptive {
            @apply flex flex-row gap-2;
        }

        .descriptive-rating {
            @apply flex flex-row gap-1 items-center text-[--lastGray] text-xs md:text-base;
        }
        .descriptive-rating__icon {
            @apply w-3 md:w-4;
        }
    </style>
</div>
